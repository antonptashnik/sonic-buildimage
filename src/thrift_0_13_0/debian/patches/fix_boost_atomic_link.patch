Description: add Boost::Atomic to link with
 Some architectures need this explicitly.
Author: Laszlo Boszormenyi (GCS) <gcs@debian.org>
Last-Update: 2018-09-23

---

--- thrift-0.11.0.orig/compiler/cpp/Makefile.am
+++ thrift-0.11.0/compiler/cpp/Makefile.am
@@ -122,6 +122,7 @@ lib_LTLIBRARIES = libthriftc.la
 
 thrift_CPPFLAGS += -DTHRIFT_ENABLE_PLUGIN=1
 thrift_LDADD += libthriftc.la
+thrift_LDADD += -lboost_atomic
 
 nodist_libthriftc_la_SOURCES = $(plugin_gen)
 libthriftc_la_SOURCES = $(compiler_core) \
--- thrift-0.11.0.orig/compiler/cpp/Makefile.in
+++ thrift-0.11.0/compiler/cpp/Makefile.in
@@ -818,6 +818,7 @@ thrift_SOURCES = src/thrift/main.h src/t
 thrift_CPPFLAGS = -I$(srcdir)/src $(am__append_3)
 thrift_CXXFLAGS = -Wall -Wextra -pedantic -Werror
 thrift_LDADD = @LEXLIB@ src/thrift/libparse.a $(am__append_4)
+thrift_LDADD += -lboost_atomic
 @WITH_PLUGIN_TRUE@lib_LTLIBRARIES = libthriftc.la
 @WITH_PLUGIN_TRUE@nodist_libthriftc_la_SOURCES = $(plugin_gen)
 @WITH_PLUGIN_TRUE@libthriftc_la_SOURCES = $(compiler_core) \
--- thrift-0.11.0.orig/lib/cpp/Makefile.am
+++ thrift-0.11.0/lib/cpp/Makefile.am
@@ -40,7 +40,7 @@ pkgconfigdir = $(libdir)/pkgconfig
 lib_LTLIBRARIES = libthrift.la
 pkgconfig_DATA = thrift.pc
 libthrift_la_LDFLAGS = -release $(VERSION)
-libthrift_la_LIBADD = $(BOOST_LDFLAGS) $(OPENSSL_LDFLAGS) $(OPENSSL_LIBS)
+libthrift_la_LIBADD = $(BOOST_LDFLAGS) $(OPENSSL_LDFLAGS) $(OPENSSL_LIBS) -lboost_atomic
 
 ## We only build the extra libraries if we have the dependencies,
 ## but we install all of the headers unconditionally.
--- thrift-0.11.0.orig/lib/cpp/Makefile.in
+++ thrift-0.11.0/lib/cpp/Makefile.in
@@ -736,7 +736,7 @@ lib_LTLIBRARIES = libthrift.la $(am__app
 pkgconfig_DATA = thrift.pc $(am__append_3) $(am__append_5) \
 	$(am__append_7) $(am__append_9)
 libthrift_la_LDFLAGS = -release $(VERSION)
-libthrift_la_LIBADD = $(BOOST_LDFLAGS) $(OPENSSL_LDFLAGS) $(OPENSSL_LIBS)
+libthrift_la_LIBADD = $(BOOST_LDFLAGS) $(OPENSSL_LDFLAGS) $(OPENSSL_LIBS) -lboost_atomic
 AM_CXXFLAGS = -Wall -Wextra -pedantic
 AM_CPPFLAGS = $(BOOST_CPPFLAGS) $(OPENSSL_INCLUDES) -I$(srcdir)/src -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS
 
